# SwapRunn Architecture Flowchart

## ğŸ—ï¸ System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         SWAPRUNN APPLICATION                         â”‚
â”‚                    (React + TypeScript + Vite)                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                               â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
            â”‚   DEV TOOLS    â”‚              â”‚  PRODUCTION â”‚
            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
            â”‚ Vite Dev       â”‚              â”‚ Vite Build  â”‚
            â”‚ Port: 8080     â”‚              â”‚ â†’ dist/     â”‚
            â”‚                â”‚              â”‚             â”‚
            â”‚ Storybook      â”‚              â”‚ Vercel      â”‚
            â”‚ Port: 6006     â”‚              â”‚ Deployment  â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¨ Frontend Stack

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      MAIN APP (App.tsx)                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  PlasmicRootProvider â† Plasmic Visual Editor Integration     â”‚
â”‚    â”‚                                                          â”‚
â”‚    â”œâ”€â–º QueryClientProvider â† React Query                     â”‚
â”‚    â”‚     â”‚                                                    â”‚
â”‚    â”‚     â”œâ”€â–º AuthProvider â† Supabase Auth + Profile Caching  â”‚
â”‚    â”‚     â”‚     â”‚                                              â”‚
â”‚    â”‚     â”‚     â”œâ”€â–º MobileApp â† Capacitor Native Features     â”‚
â”‚    â”‚     â”‚     â”‚     â”‚                                        â”‚
â”‚    â”‚     â”‚     â”‚     â”œâ”€â–º TooltipProvider â† Radix UI          â”‚
â”‚    â”‚     â”‚     â”‚     â”‚     â”‚                                  â”‚
â”‚    â”‚     â”‚     â”‚     â”‚     â”œâ”€â–º BrowserRouter â† React Router  â”‚
â”‚    â”‚     â”‚     â”‚     â”‚     â”‚     â”‚                            â”‚
â”‚    â”‚     â”‚     â”‚     â”‚     â”‚     â”œâ”€â–º Header (Global)         â”‚
â”‚    â”‚     â”‚     â”‚     â”‚     â”‚     â”‚                            â”‚
â”‚    â”‚     â”‚     â”‚     â”‚     â”‚     â””â”€â–º Routes (see below)      â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ›£ï¸ Routing Structure

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ROUTE TREE                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚
â”œâ”€â–º / â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Index (Landing Page)
â”‚
â”œâ”€â–º /plasmic-home â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Homepage (Plasmic Codegen)
â”‚
â”œâ”€â–º /plasmic/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º PlasmicCatchAll (Dynamic Plasmic)
â”‚
â”œâ”€â–º /how-it-works â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º HowItWorks
â”œâ”€â–º /login â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Login (Portal Chooser)
â”‚
â”œâ”€â–º DEALER ROUTES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   â”œâ”€â–º /dealer/auth           â”‚ DealerAuth (Signup/Login)
â”‚   â”œâ”€â–º /dealer/dashboard      â”‚ DealerDashboard [Protected]
â”‚   â”œâ”€â–º /dealer/admin          â”‚ DealerAdminDashboard [Protected]
â”‚   â”œâ”€â–º /dealer/create-job     â”‚ CreateJob [Protected]
â”‚   â”œâ”€â–º /dealer/settings       â”‚ DealerSettings [Protected]
â”‚   â”œâ”€â–º /dealer/employees      â”‚ EmployeesPage [Protected]
â”‚   â””â”€â–º /dealers/registration  â”‚ DealershipRegistration
â”‚
â”œâ”€â–º DRIVER ROUTES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   â”œâ”€â–º /driver/auth           â”‚ DriverAuth (Signup/Login)
â”‚   â”œâ”€â–º /driver/dashboard      â”‚ DriverDashboard [Protected]
â”‚   â””â”€â–º /driver/requests       â”‚ DriverRequests [Protected]
â”‚
â”œâ”€â–º STAFF ROUTES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   â””â”€â–º /staff/signup          â”‚ StaffSignup (Invite-based)
â”‚
â”œâ”€â–º ADMIN ROUTES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   â””â”€â–º /accept-invitation     â”‚ AcceptInvitation
â”‚
â”œâ”€â–º UTILITY ROUTES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   â”œâ”€â–º /track                 â”‚ Track (Public Job Tracking)
â”‚   â”œâ”€â–º /billing               â”‚ BillingSettings [Protected]
â”‚   â”œâ”€â–º /password-reset        â”‚ PasswordResetRequest
â”‚   â”œâ”€â–º /password-update       â”‚ PasswordUpdate
â”‚   â”œâ”€â–º /privacy               â”‚ Privacy Policy
â”‚   â”œâ”€â–º /terms                 â”‚ Terms of Service
â”‚   â””â”€â–º /contact               â”‚ Contact Page
â”‚
â””â”€â–º /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º NotFound (404)
```

## ğŸ‘¥ User Type Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  NEW VISITOR â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€â–º View Landing Page (/)
       â”‚
       â”œâ”€â–º Click "Get Started" or "Login"
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  LOGIN PORTAL   â”‚
â”‚  (/login)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â”‚         â”‚
    â–¼         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ DEALER â”‚  â”‚ DRIVER â”‚
â”‚  PATH  â”‚  â”‚  PATH  â”‚
â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
    â”‚           â”‚
    â”‚           â”‚
    â–¼           â–¼
/dealer/auth  /driver/auth
    â”‚           â”‚
    â”‚           â”‚
(Auth Flow)  (Auth Flow)
    â”‚           â”‚
    â–¼           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    AUTHENTICATED USER            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                  â”‚
    â–¼                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ DEALER   â”‚      â”‚ DRIVER   â”‚
â”‚ Dashboardâ”‚      â”‚ Dashboardâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚                  â”‚
    â”œâ”€â–º Create Jobs    â”œâ”€â–º View Available Jobs
    â”œâ”€â–º Manage Staff   â”œâ”€â–º Accept Jobs
    â”œâ”€â–º View Reports   â”œâ”€â–º Clock In/Out
    â”œâ”€â–º Settings       â”œâ”€â–º Update Profile
    â””â”€â–º Billing        â””â”€â–º Earnings
```

## ğŸ¨ Plasmic Integration Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  PLASMIC VISUAL EDITOR                       â”‚
â”‚         (https://studio.plasmic.app/projects/...)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
                    â”‚         â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”  â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  CODEGEN â”‚  â”‚   LOADER   â”‚
            â”‚ APPROACH â”‚  â”‚  APPROACH  â”‚
            â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                 â”‚              â”‚
                 â”‚              â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”      â”‚
    â”‚ npx plasmic sync   â”‚      â”‚
    â”‚ (Manual Command)   â”‚      â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
             â”‚                  â”‚
             â–¼                  â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ src/plasmic/     â”‚  â”‚ plasmic-init.ts â”‚
    â”‚ â”œâ”€ Homepage.tsx  â”‚  â”‚ (Loader Config) â”‚
    â”‚ â”œâ”€ Plasmic*.tsx  â”‚  â”‚                 â”‚
    â”‚ â””â”€ *.module.css  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
             â”‚                     â”‚
             â”‚                     â”‚
             â–¼                     â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ /plasmic-home    â”‚  â”‚ /plasmic/*          â”‚
    â”‚ (Static Route)   â”‚  â”‚ (Dynamic Routes)    â”‚
    â”‚                  â”‚  â”‚                     â”‚
    â”‚ Import Component â”‚  â”‚ PlasmicCatchAll     â”‚
    â”‚ Directly         â”‚  â”‚ Fetches from API    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ—„ï¸ Data & State Management

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       DATA LAYER                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚                               â”‚
        â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”                 â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
        â”‚  SUPABASE  â”‚                 â”‚   LOCAL    â”‚
        â”‚  (Backend) â”‚                 â”‚   STATE    â”‚
        â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                 â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
              â”‚                               â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
    â”‚         â”‚         â”‚                     â”‚
    â–¼         â–¼         â–¼                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Auth â”‚ â”‚ DB   â”‚ â”‚ Edge    â”‚         â”‚ React      â”‚
â”‚      â”‚ â”‚ RPC  â”‚ â”‚ Functionsâ”‚        â”‚ Query      â”‚
â”‚      â”‚ â”‚      â”‚ â”‚         â”‚         â”‚ Cache      â”‚
â””â”€â”€â”€â”¬â”€â”€â”˜ â””â”€â”€â”€â”¬â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
    â”‚        â”‚         â”‚                     â”‚
    â”‚        â”‚         â”‚                     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  useAuth Hook    â”‚
            â”‚  - Profile Cache â”‚
            â”‚  - Loading State â”‚
            â”‚  - User Type     â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“± Mobile Architecture (Capacitor)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    WEB BUILD (Vite)                     â”‚
â”‚                   npm run build                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  npx cap sync ios    â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              IOS/ANDROID NATIVE WRAPPER                   â”‚
â”‚                  (Capacitor Plugins)                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                           â”‚
â”‚  â”œâ”€â–º Camera (VIN Scanning)                               â”‚
â”‚  â”œâ”€â–º Geolocation (Driver Tracking)                       â”‚
â”‚  â”œâ”€â–º Push Notifications                                  â”‚
â”‚  â”œâ”€â–º Biometric Auth (Touch/Face ID)                      â”‚
â”‚  â”œâ”€â–º Haptics (Feedback)                                  â”‚
â”‚  â””â”€â–º Local Notifications                                 â”‚
â”‚                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  useMobile     â”‚
              â”‚  Capacitor()   â”‚
              â”‚  Hook          â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ” Authentication Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   VISITOR   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Click Login     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Choose Portal:             â”‚
â”‚  â”œâ”€â–º Dealer/Staff           â”‚
â”‚  â””â”€â–º Driver                 â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Auth Page                  â”‚
â”‚  (Supabase Auth UI)         â”‚
â”‚  â”œâ”€â–º Email/Password         â”‚
â”‚  â”œâ”€â–º Sign Up                â”‚
â”‚  â””â”€â–º Forgot Password        â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Supabase Auth              â”‚
â”‚  â”œâ”€â–º Create Session         â”‚
â”‚  â””â”€â–º Return User Object     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  useAuth Hook               â”‚
â”‚  â”œâ”€â–º Fetch Profile (RPC)    â”‚
â”‚  â”œâ”€â–º Cache in State         â”‚
â”‚  â””â”€â–º Determine User Type    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ProtectedRoute Check       â”‚
â”‚  â”œâ”€â–º Has Session? âœ“         â”‚
â”‚  â”œâ”€â–º Has Profile? âœ“         â”‚
â”‚  â”œâ”€â–º Correct Type? âœ“        â”‚
â”‚  â””â”€â–º Allow Access           â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Redirect to Dashboard      â”‚
â”‚  â”œâ”€â–º Dealer â†’ /dealer/dash  â”‚
â”‚  â”œâ”€â–º Driver â†’ /driver/dash  â”‚
â”‚  â””â”€â–º Staff â†’ /dealer/dash   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ› ï¸ Development Tools

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   DEVELOPMENT                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚              â”‚              â”‚
        â–¼              â–¼              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    VITE     â”‚ â”‚ STORYBOOK  â”‚ â”‚  PLASMIC   â”‚
â”‚  Dev Server â”‚ â”‚  UI Dev    â”‚ â”‚  Studio    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Port: 8080  â”‚ â”‚ Port: 6006 â”‚ â”‚  Web UI    â”‚
â”‚             â”‚ â”‚            â”‚ â”‚            â”‚
â”‚ Hot Reload  â”‚ â”‚ 22 Stories â”‚ â”‚ Live Edit  â”‚
â”‚ TypeScript  â”‚ â”‚ Component  â”‚ â”‚ No-Code    â”‚
â”‚ ESLint      â”‚ â”‚ Testing    â”‚ â”‚ Visual     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“¦ Build & Deploy Pipeline

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Git Push    â”‚
â”‚  to GitHub   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  GitHub Actions   â”‚
â”‚  (If Configured)  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  npm run build    â”‚
â”‚  â”œâ”€â–º TypeScript   â”‚
â”‚  â”œâ”€â–º Vite Build   â”‚
â”‚  â””â”€â–º dist/ folder â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Vercel Deploy    â”‚
â”‚  â”œâ”€â–º Production   â”‚
â”‚  â””â”€â–º Preview URLs â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“‚ Project Structure

```
SwapRunn_Bolt/
â”‚
â”œâ”€â”€â”€ src/
â”‚    â”œâ”€â”€â”€ pages/              # 24 Page Components
â”‚    â”‚    â”œâ”€â”€â”€ Index.tsx      # Landing page
â”‚    â”‚    â”œâ”€â”€â”€ Homepage.tsx   # Plasmic codegen
â”‚    â”‚    â”œâ”€â”€â”€ PlasmicCatchAll.tsx  # Dynamic Plasmic
â”‚    â”‚    â”œâ”€â”€â”€ DealerDashboard.tsx
â”‚    â”‚    â”œâ”€â”€â”€ DriverDashboard.tsx
â”‚    â”‚    â””â”€â”€â”€ ...
â”‚    â”‚
â”‚    â”œâ”€â”€â”€ components/         # Shared UI Components
â”‚    â”‚    â”œâ”€â”€â”€ ui/           # shadcn/ui primitives
â”‚    â”‚    â”œâ”€â”€â”€ dealer/       # Dealer-specific
â”‚    â”‚    â”œâ”€â”€â”€ driver/       # Driver-specific
â”‚    â”‚    â”œâ”€â”€â”€ Header.tsx    # Global header
â”‚    â”‚    â”œâ”€â”€â”€ ProtectedRoute.tsx
â”‚    â”‚    â””â”€â”€â”€ ...
â”‚    â”‚
â”‚    â”œâ”€â”€â”€ plasmic/           # Plasmic Generated Code
â”‚    â”‚    â”œâ”€â”€â”€ blank_website/
â”‚    â”‚    â”‚    â”œâ”€â”€â”€ PlasmicHomepage.tsx
â”‚    â”‚    â”‚    â””â”€â”€â”€ *.module.css
â”‚    â”‚    â””â”€â”€â”€ plasmic-root.tsx
â”‚    â”‚
â”‚    â”œâ”€â”€â”€ hooks/             # React Hooks
â”‚    â”‚    â”œâ”€â”€â”€ useAuth.tsx   # Auth + Profile
â”‚    â”‚    â”œâ”€â”€â”€ useMobileCapacitor.ts
â”‚    â”‚    â””â”€â”€â”€ ...
â”‚    â”‚
â”‚    â”œâ”€â”€â”€ services/          # API/Business Logic
â”‚    â”‚    â”œâ”€â”€â”€ supabaseService.ts
â”‚    â”‚    â”œâ”€â”€â”€ notificationService.ts
â”‚    â”‚    â””â”€â”€â”€ ...
â”‚    â”‚
â”‚    â”œâ”€â”€â”€ integrations/      # External Services
â”‚    â”‚    â””â”€â”€â”€ supabase/
â”‚    â”‚         â””â”€â”€â”€ client.ts
â”‚    â”‚
â”‚    â”œâ”€â”€â”€ stories/           # Storybook Stories
â”‚    â”‚    â””â”€â”€â”€ pages/        # 22 Page stories
â”‚    â”‚
â”‚    â”œâ”€â”€â”€ plasmic-init.ts    # Plasmic Loader Config
â”‚    â””â”€â”€â”€ App.tsx            # Root Component
â”‚
â”œâ”€â”€â”€ public/                 # Static Assets
â”œâ”€â”€â”€ supabase/              # Supabase Config
â”‚    â”œâ”€â”€â”€ functions/        # Edge Functions
â”‚    â””â”€â”€â”€ migrations/       # DB Migrations
â”‚
â”œâ”€â”€â”€ ios/                   # iOS Capacitor App
â”œâ”€â”€â”€ .storybook/           # Storybook Config
â”œâ”€â”€â”€ plasmic.json          # Plasmic CLI Config
â”œâ”€â”€â”€ vite.config.ts        # Vite Config
â”œâ”€â”€â”€ package.json          # Dependencies
â””â”€â”€â”€ tsconfig.json         # TypeScript Config
```

---

## ğŸ¯ Key Integration Points

### Plasmic â†” React
- **Codegen**: Components in `src/plasmic/`
- **Loader**: Dynamic fetch via `PlasmicCatchAll.tsx`
- **Provider**: `PlasmicRootProvider` wraps entire app

### Supabase â†” Auth
- **Client**: `src/integrations/supabase/client.ts`
- **Auth Hook**: `useAuth.tsx` with profile caching
- **RPC**: `get_user_profile` for user data

### Mobile â†” Web
- **Detection**: `useMobileCapacitor()` hook
- **Native Features**: Camera, GPS, Push, Biometrics
- **Shared Codebase**: Same React components

### Storybook â†” Components
- **Stories**: 22 page stories in `src/stories/pages/`
- **Isolation**: Test components without full app
- **Documentation**: Visual component library

---

**Generated:** November 7, 2025  
**Repository:** https://github.com/Ltancreti7/SwapRunn_Bolt  
**Last Updated:** Commit `edef4f3`
